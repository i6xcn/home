<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>圈子</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Web App">
<meta name="renderer" content="webkit">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<style type="text/css">
*{margin:0;padding:0}body{color:#051b28;font-size:15px;background-color:#eee;}img{border:0;vertical-align:middle;}ul,li{list-style:none;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;-webkit-padding-start:0}a{text-decoration:none}.contant{background:#fff;max-width:640px;min-width:320px;margin:0 auto;position:relative;padding-bottom:40px;}.header{padding-top:60px;background:#ff5983;}.top{background:#fff;height:60px;overflow:hidden;}.logo{position: absolute;left:50%;width:75px;height:75px;background-repeat:no-repeat;background-position:center;background-size:cover;border-radius:100%;margin: 0 auto;overflow:hidden;transform: translate(-50%,-50%);}.navbar{border-bottom:#EDEDED 1px solid;overflow:hidden;}.navbar li{float:left;width:25%;text-align:center}.navbar li a{display:block;padding:8px 0;font-size:17px;color:#858585}.navbar li a:hover{color:#ff5983;background:#eeeeee;}.xhx{color:#ff5983!important;border-bottom:#ff5983 2px solid;display:block}.itemg{overflow:hidden;border-bottom:#EDEDED 1px solid;padding:10px 0;}.itemg_lf{float:left;width:15%;}.itemg_rg{float:right;width:83%;margin-right:1.5%;}.itemg_lf img{display:block;height:70%;width:70%;margin:auto;border-radius:50%;}.itemg_rg_tp{color:#C8C8C8;overflow:hidden;}.itemg_rg_tp div{width:50%;float:left}.itemg_rg_tp span{color:#0c6ad4;font-weight:700;}.itemg_rg_sm{width:98%;color:#737373;margin:10px 0;}.itemg_rg_main{overflow:hidden;}.itemg_rg_main .play-btn{left:50%;top:50%;height:30%;transform:translate(-50%,-50%);position:absolute;border:0;}.itemg_rg_main ul{display:flex;flex-wrap: wrap;}.itemg_rg_main li{list-style:none;width:31%;position:relative;height:0;padding-bottom:23%;cursor:pointer;transition: all 0.6s;border: rgb(0 0 0 / 5%) 1px solid;}.itemg_rg_main li:hover {border-radius:15px;}.itemg_rg_main li:not(:nth-child(3n)){margin-right: 2%;margin-bottom:2%}.bottom{max-width:640px;min-width:320px;width:100%;position:fixed;display:flex;line-height:40px;height:40px;bottom:0;background:#ff5983;z-index:10000;}.childdiv{flex:1;text-align:center;}.bottom a{color:#fff;}.layerpic{max-width:640px;min-width:320px;width:100%;}.layerFlveo{max-width:640px;min-width:320px;width:100%;height:100%;background-color:transparent !important;box-shadow: 0 0 0 rgba(0,0,0,0) !important;} #layui-Flveo{overflow:hidden !important;}.layui-layer-content p{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.wrapper {margin:10px;display: none;}.wrapper .search{display: flex;align-items: center;justify-content:center;width:315px;height:50px;margin:15px auto;box-sizing: border-box;}.wrapper .search-input{flex: 1;box-sizing:border-box;padding:10px;height:100%;background-color:#f7f7f7;border-radius: 9px 0 0 9px;border: 1px solid #ff5983;display:block;overflow: hidden;}.input, .input-wrapper {outline:none;border:none;text-decoration:inherit;}.input-wrapper{display:flex;position:relative;width:100%;height:100%;-webkit-box-orient: vertical;-webkit-box-direction: normal;flex-direction: column;-webkit-box-pack: center;justify-content:center;}.input{background:none;font-size:16px;height:28px;line-height:28px;}.wrapper #search-btn{display:flex;align-items:center;justify-content:center;height:100%;width:75px;background-color:#ff5983;color:#fff;font-size:16px;font-weight: 700;border-radius: 0 9px 9px 0;cursor: pointer;}.wrapper .result-list{margin-top:10px;border-radius:10px;background-color:#f7f7f7;}.wrapper .result-list-item{padding:10px;position:relative;}.wrapper .result-content {display:flex;margin-top:10px;}.wrapper .result-content-left {width: calc(30% - 5px);margin-right: 10px;}.wrapper .result-value{width: 100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-top: 5px;color:#1e80ff;display:flex;align-items:center;}.wrapper .result-logo{width:15px;height:15px;border-radius:100%;margin-right: 5px;display:block;background-position: 0% 0%;background-size:100% 100%;background-repeat:no-repeat;}.wrapper .result-list-value{width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-top:5px;text-align:right;}.wrapper .result-list-value a{color: #1e80ff;}.wrapper .result-list-right{width:calc(70% - 5px);}.img-upload{text-align:center;line-height:30px;}.a-upload {width:100%;height:30px;line-height:30px;position:relative;background:#ff5983;border-radius:5px;overflow:hidden;display:inline-block;text-align:center;color:#ffffff;}.a-upload input{position:absolute;width:100%;height:30px;right:0;top:0;opacity:0;filter:alpha(opacity=0);outline:none;cursor:pointer;}.loadMore{cursor:pointer;display:block;position:relative;line-height:57px;text-align:center;width:100%;color:#10aae4}label{position:relative;cursor:pointer;}label::after{content:attr(data-hover);display:none;position:absolute;left:50%;top:100%;transform:translateX(-50%);background-color:#ff5983;padding:0 6px;color:#FFF;font-size:12px;border-radius:4px;white-space:nowrap;} label:hover::after {display:block;}
</style>
<script language="javascript">if (/\/\/www\./i.test(location.href)) location.href = location.href.replace(/\/\/www\./i,"//");</script>
</head>
<body>
<div class="contant">
    <div class="header">
        <div class="top">
            <div class="logo" id="logo"></div>
        </div>
    </div>
    <div class="navbar">
        <ul>
            <li><a id="Pic" href="javascript:void(0);" onclick="Pic()">图床</a></li>
            <li><a id="Mid" href="javascript:void(0);" onclick="Mid()">音乐</a></li>
            <li><a id="Flv" href="javascript:void(0);" onclick="Flv()">短剧</a></li>
            <li><a id="LOL" href="javascript:void(0);" onclick="LOL()">沙雕</a></li>
        </ul>
    </div>

    <div id="Mid-assort" class="wrapper">
        <div class="search"><div class="search-input"><div class="input-wrapper"><input maxlength="140" enterkeyhint="search" autocomplete="off" type="search" class="input" id="Mid-input" placeholder="请输入歌名"></div></div><div id="search-btn" href="javascript:void(0);" onclick="search_click('#Mid-input')">搜 歌</div></div>
        <div id="Mid-key"></div>
        <div id="Mid-data"></div>
    </div>

    <div id="Flv-assort" class="wrapper">
        <div class="search"><div class="search-input"><div class="input-wrapper"><input maxlength="140" enterkeyhint="search" autocomplete="off" type="search" class="input" id="Flv-input" placeholder="请输入短剧名"></div></div><div id="search-btn" href="javascript:void(0);" onclick="search_click('#Flv-input')">搜 剧</div></div>
        <div id="Flv-key"></div>
        <div id="Flv-data"></div>
    </div>

    <div id="LOL-assort" class="wrapper">
        <div id="LOL-data"></div>
        <div id="LOL-loadMore" class="loadMore"></div>
    </div>

    <div id="Pic-assort" class="wrapper">
        <div class="img-upload">
            <p><a href="javascript:void(0);" class="a-upload" ><input type="file" multiple accept="image/*" id="upfile">上传图片</a></p>
            <label data-hover="推荐使用"><input checked type="radio" name="type" value="wy">网易</label>
            <label data-hover="推荐使用"><input type="radio" name="type" value="mt">美图</label>
            <label data-hover="有水印"><input type="radio" name="type" value="bd">百度</label>
            <label data-hover="腾讯云对象存储"><input type="radio" name="type" value="bk">备用</label>
        </div>
        <fieldset style="padding:0 10px 10px;"><legend style="text-align:center;padding:0 10px;">使用说明</legend><p>1、图片托管于各大官网，最大支持10MB；</p><p>2、禁止上传违规图片，造成后果自负；</p><p>3、<a href="https://s.qiniu.com/eEFNBz" target="_blank" style="color:red;">七牛云存储</a> <a href="https://mp34.lanzout.com/iP8pR230laif" target="_blank" style="color:#0c6ad4;">七牛图床源码下载</a><a href="javascript:void(0);" onclick="picdata()">；</a></p></fieldset>
        <div id="Pic-data"></div>
        <div id="Pic-loadMore" class="loadMore"></div>
    </div>

    <div class="bottom">
        <div class="childdiv"><a href="./">主页</a></div>
        <div class="childdiv"><a href="javascript:scroll(0,0)"><b>圈子</b></a></div>
    </div>
</div>
<script type="text/javascript" src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript" src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/layer/3.5.1/layer.min.js"></script>
<script type="text/javascript">
$(function(){
    const handler = {"#V":Flv,"#S":LOL,"#Y":Mid};
    window.onload = (handler[window.location.hash] || Pic)();
});
function search_click(key){
    const txt = $(key).val();
    if(txt.trim().length==0){
        layer.tips(PopUpMsg(9),key,{tips:[3,'#ff5983']});
        return false;
    }
    if(key=='#Mid-input'){
        Mid_data(txt);
    } else if (key=='#Flv-input'){
        Flv_data(txt);
    }
}
function Mid(){
    $('#LOL-assort').hide();
    $('#LOL').removeClass('xhx');
    $('#Flv').removeClass('xhx');
    $('#Flv-assort').hide();
    $('#Pic-assort').hide();
    $('#Pic').removeClass('xhx');
    $('#Mid-assort').show();
    $('#Mid-key').show();
    $('#Mid-data').hide();
    $('#Mid').addClass('xhx');
    $('#Mid-input').val('');
    window.location.hash = "Y";
    document.title = "搜音库-你想要的的歌曲库";
    $("#logo").css("background-image", "url('https://img0.baidu.com/it/u=3244688120,588283986&fm=253')");
    const Midkey = $('#Mid-key').html();
    if(Midkey.trim().length==0){
        const loadIndex = layer.load(0, {shade: false});
        GP_data("music&ac=hot",{method:'GET'},function(list){
            if (list.msg){
                const data   = list.data;
                const number = data.length;
                for (var i = 0; i < number; i++) {
                    const img = data[i].img;
                    const author = data[i].author;
                    const s_name = data[i].s_name;
                    if (s_name != null || s_name.trim().length !== 0){
                        $("#Mid-key").append('<li style="display:inline-block;width:23%;margin:10px 1%;height:0;padding-bottom:30%;position:relative;border-radius:8px;"><a href="javascript:void(0);" onclick="Mid_data(\''+author+' '+s_name+'\');" style="width:100%;padding-bottom:100%;border-radius:8px;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:cover;position:relative;display:block;background-image:url('+img+');"></a><span style="overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;line-height:15px;padding-top: 5px;font-size:.875rem;">'+s_name+'</span><span style="overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;line-height:15px;padding-top: 5px;font-size:.875rem;">'+author+'</span></li>');
                    }
                }
            } else {
                layer.msg(list.data, {icon: 2});
            }
            layer.close(loadIndex);
        });
    }
}
function Mid_data(txt) {
    const loadIndex = layer.load(0,{shade:false});
    GP_data("music&wd="+txt,{method:'GET'},function(list){
        if (list.msg){
            const json = list.data; var number = json.length;
            $("#Mid-data").text('');
            for (var i = 0; i < number; i++) {
                const d = json[i].id;
                if (d != null || d.trim().length !== 0){
                    const n = json[i].name;
                    const a = json[i].artists;
                    const k = json[i].Key;
                    $("#Mid-data").append('<div class="result-list"><div class="result-list-item"><div class="result-list-item-title">'+a+' - '+n+'</div><div class="result-content"><div class="result-content-left"><div class="result-value"><div class="result-logo" style="background-image: url(https://t14.baidu.com/it/u=729523279,2791742236&fm=179);"></div>搜音库</div></div><div class="result-list-right"><div class="result-list-value"><a href="javascript:void(0);" onclick="Mid_url(\''+d+'\',\''+k+'\')">获取参数</a></div></div></div></div></div></div>');
                }
            }
            $('#Mid-data').show();
            $('#Mid-key').hide();
            $('#Mid-input').val(txt);
        } else {
            layer.msg(list.data, {icon: 2});
        }
        layer.close(loadIndex);
    });
}
function Mid_url(id,tk) {
    if (localStorage.getItem("music") == null){  var num = "1";   } else {  var num = parseInt(localStorage.getItem("music"));  }
    var max = "5";
    var ove = '说明：剩余解析：'+ (max-num) +'次，<a href="javascript:void(0);" style="color:#ff5983;" onclick="follow(\'mid\',\''+id+'\',\''+tk+'\')">关注微博</a>后解除限制。';
    if (num > max){
        var ove = "本站只提供调试服务,不承担任何直接或间接的责任！";
        if (localStorage.getItem("relation") == null){
            follow("mid",id,tk);
            return false;
        }
    }
    num++;
    const loadIndex = layer.load(0,{shade:false});
    GP_data("music&id="+id+"&key="+tk,{method:'GET'},function(list){
        if (list.msg){
            layer.open({type:1,title:false,scrollbar:false,skin:'layerpic',content:'<div style="padding:20px;"><p>歌名：'+list.data.artist+' - '+list.data.name+'</p><p>封面：<a href="javascript:void(0);" onclick="copytxt(\''+list.data.img+'\')">'+list.data.img+'</a></p><p>地址：<a href="javascript:void(0);" onclick="copytxt(\''+list.data.url+'\')">'+list.data.url+'</a></p><p>'+ove+'</p></div>',btn:0});
            localStorage.setItem('music',num);
        } else {
            layer.msg(list.data, {icon: 2});
        }
        layer.close(loadIndex);
    });
}
function Flv(){
    $('#Mid').removeClass('xhx');
    $('#Mid-assort').hide();
    $('#LOL-assort').hide();
    $('#LOL').removeClass('xhx');
    $('#Pic').removeClass('xhx');
    $('#Pic-assort').hide();
    $('#Flv').addClass('xhx');
    $('#Flv-assort').show();
    $('#Flv-key').show();
    $('#Flv-data').hide();
    $('#Flv-input').val('');
    window.location.hash = "V";
    document.title = "短剧池-全网短剧集聚地";
    $("#logo").css("background-image", "url('https://img0.baidu.com/it/u=3599983424,3153659671&fm=253')");
    const playkey = $('#Flv-key').html();
    if(playkey.trim().length==0){
        const person = {"item":[{"title": "少帅夫人茶又媚","src": "https://image.uc.cn/s/ulive_fe/s/upload/2024/dc63f195691ccad9d036dafb35c8d661.jpg","category": "爱情 穿越 / 全93集"},{"title": "踹掉渣男后三个哥哥团宠我","src": "http://image.uc.cn/s/ulive_fe/s/upload/2024/fa9df0948def385ad1ecac5a9e73f8e5.jpg","category": "现代 霸总 / 全74集"},{"title": "四海","src": "https://image.uc.cn/s/ulive_fe/s/upload/2024/5c2a306d7995f3fc777a0fe4da6d94e1.jpg","category": "重生 现代 / 全97集"},{"title": "裴总每天都想父凭子贵","src": "https://image.uc.cn/s/ulive_fe/s/upload/2024/7dd2558c7b61fc3aa986a5e3b133e92d.jpg","category": "爱情 霸总/共99集"},{"title": "凭爱意将月光私有","src": "https://image.uc.cn/s/ulive_fe/s/upload/2024/acfe0bf0772f497f1b034d01ce8eabcd.jpg","category": "爱情 现代/共101集"},{"title": "我居然闪婚了禁欲男神","src": "https://image.uc.cn/s/ulive_fe/s/upload/2024/d57f881df62326677e863ad3a93bdc44.jpg","category": "爱情 穿越/共101集"},{"title": "初次相爱的我们","src": "https://image.uc.cn/s/ulive_fe/s/upload/2024/00bc405462b9ac4c960b139540a3cb3d.jpg","category": "爱情 豪门/共86集"},{"title": "落花时节又逢君","src": "https://image.uc.cn/s/ulive_fe/s/upload/2024/4564643b02567de746f75d841517a25a.jpg","category": "爱情 穿越/共85集"}] };
        const data = person.item; const number = data.length;
        for (var i = 0; i < number; i++) {
            const img  = data[i].src;
            const name = data[i].title;
            const ctgy = data[i].category;
            if (name != null || name.trim().length !== 0){
                $("#Flv-key").append('<li style="display:inline-block;width:23%;margin:10px 1%;height:0;padding-bottom:39%;position:relative;border-radius:8px;"><a href="javascript:void(0);" onclick="Flv_data(\''+name+'\');" style="width:100%;padding-bottom:139%;border-radius:8px;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:cover;position:relative;display:block;background-image:url('+img+');"></a><span style="overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;line-height:15px;padding-top: 5px;font-size:.875rem;">'+ctgy+'</span><span style="overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;line-height:15px;padding-top: 5px;font-size:.875rem;">'+name+'</span></li>');
            }
        }
    }
}
function Flv_data(txt) {
    const loadIndex = layer.load(0,{shade:false});
    GP_data("vod&wd="+txt,{method:'GET'},function(list){
        if (list.msg){
            const Flv = list.data;
            $("#Flv-data").text('');
            for (var i = 0; i < Flv.length; i++) {
                const Flveo = Flv[i].episode;
                const title = Flv[i].name.replace(/\d+[-,、.]/g, '');
                if (Flveo != null){
                    let txt = '';
                    for (var k = 0; k < Flveo.length; k++) {
                        txt  += '<a href="'+Flveo[k].url+'" target="_blank" style="background-color:#ff5983;color:white;text-align:center;display:inline-block;padding:2px 5px;margin:3px;border-radius:5px;">'+Flveo[k].name+'</a>';
                    }
                    $("#Flv-data").append('<div class="result-list"><div class="result-list-item"><p style="color:#0c6ad4;font-weight:700;font-size:16px;">'+title+'-'+Flv[i].marks+'-'+Flv[i].type+'-<a href="javascript:void(0);" onclick="eject(\''+Flv[i].cover+'\',\'pic\')">封面</a></p><p>视频来自网络,别信视频广告,谨防上当受骗!</p>'+txt+'</div></div></div>');
                }
            }
            $('#Flv-data').show();
            $('#Flv-key').hide();
            $('#Flv-input').val(txt);
        } else {
            layer.msg(list.data, {icon: 2});
        }
        layer.close(loadIndex);
    });
}
function LOL(){
    $('#Mid-assort').hide();
    $('#Mid').removeClass('xhx');
    $('#Pic-assort').hide();
    $('#Pic').removeClass('xhx');
    $('#Flv-assort').hide();
    $('#Flv').removeClass('xhx');
    $('#LOL-assort').show();
    $('#LOL').addClass('xhx');
    window.location.hash = "S";
    document.title = "搞笑圈子-我的快乐源泉";
    $("#logo").css("background-image", "url('https://img0.baidu.com/it/u=2203015616,2177196308&fm=253')");
    const data = $('#LOL-data').html();
    if(data.trim().length==0){
        LOL_data();
    }
}
function LOL_data(num){
    const loadIndex = layer.load(0,{shade:false});
    var page = isNaN(num) ? 0 : Number(num);
    GP_data("other&pg="+page,{method:'GET'},function(list){
        if (list.msg == false){
            layer.msg(list.data, {icon: 2});
            $("#LOL-loadMore").html(list.data);
        } else {
            var LOLdata = list.data;
            for (var i = 0; i < LOLdata.length; i++) {
                var user   = LOLdata[i].user; var cards  = LOLdata[i].cards; var title  = LOLdata[i].title;
                var avatar = LOLdata[i].avatar; var outimg = "";var css = "";
                if (cards.length === 1){ var css = "width:65%;padding-bottom:35%;";}
                for (var ii = 0; ii < cards.length; ii++) {
                    var imgurl = cards[ii].img_url;
                    var origin = cards[ii].img_url_big;
                    var video  = cards[ii].mp4_url;
                    if (video === '' || video.trim().length === 0){
                        var outimg = outimg+'<li style="background-image:url('+imgurl+');background-position:center;background-size:cover;'+css+'" onclick="eject(\''+origin+'\',\'pic\')"></li>';
                    }else{
                        var outimg = outimg+'<li style="background-image:url('+imgurl+');background-position:center;background-size:cover;'+css+'" onclick="eject(\''+video+'\',\'video\',\''+imgurl+'\')"><svg viewBox="0 0 72 72" class="play-btn"><circle cx="36" cy="36" fill="#FFF" fill-opacity=".80" r="36"></circle><path d="M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z" fill="#444" fill-rule="nonzero"></path></svg></li>';
                    }
                }
                $("#LOL-data").append('<div class="itemg"><div class="itemg_lf"><img src="'+avatar+'"></div><div class="itemg_rg"><div class="itemg_rg_tp"><span>'+user+'</span></div><div class="itemg_rg_sm">'+title+'</div><div class="itemg_rg_main"><ul>'+outimg+'</ul></div></div></div>');
            }
            var next = page+1;
            $("#LOL-loadMore").html('<div onclick="LOL_data('+next+')">加载更多...</div>');
        }
        layer.close(loadIndex);
    });
}
function Pic(){
    $('#Mid-assort').hide();
    $('#Mid').removeClass('xhx');
    $('#Flv-assort').hide();
    $('#Flv').removeClass('xhx');
    $('#LOL-assort').hide();
    $('#LOL').removeClass('xhx');
    $('#Pic').addClass('xhx');
    $('#Pic-assort').show();
    window.location.hash = "T";
    document.title = "图床-免费图片托管链接";
    $("#logo").css("background-image", "url('https://img0.baidu.com/it/u=1895635493,1543052772&fm=253')");
    if (localStorage.getItem("img")!=null){
        var arrr = new String(localStorage.getItem("img")).split(","); var data = '';
        for (i=0;i<arrr.length;i++ ){
            data += '<li style="background-image:url('+arrr[i]+');background-position:center;background-size:cover;display:inline-block;width:23%;margin:10px 1%;height:0;padding-bottom:30%;position:relative;cursor:pointer;" onclick="copytxt(\''+arrr[i]+'\')" title="点击复制图链"></li>';
        }
        $("#Pic-data").html(data);
        $("#Pic-data").show();
    }
    $("#upfile").change(function() {
    for(var i = 0; i < this.files.length; i++){
        var f = this.files[i]; var S = f.size; var M = 10;
        var t= $('input:radio[name="type"]:checked').val();
        if(!f){
            PopUpMsg(4,2);
        }else if(parseInt(S) >= parseInt(M*1024*1024)){  
            PopUpMsg(1,2);
        }else if(!t){  
            PopUpMsg(3,2);
        }else{
            var loadIndex = layer.load(0,{shade:false});
            var formData = new FormData();
            formData.append("file", f);
            formData.append("type", t);
            GP_data("upimg",{upfile:'upfile',data:formData,timeout:0},function(list){
                if (list.msg){
                    PopUpMsg(6,1);
                    $("#Pic-data").prepend('<li style="background-image:url('+list.data.img+');background-position:center;background-size:cover;display:inline-block;width:23%;margin:10px 1%;height:0;padding-bottom:30%;position:relative;cursor:pointer;" onclick="copytxt(\''+list.data.img+'\')" title="点击复制图链"></li>');
                    addlocal('img',list.data.img);
                } else {
                    layer.msg(list.data, {icon: 2});
                }
                layer.close(loadIndex);
            });
        }
    }
    $(this).val("");
    });
}
function picdata(){
    layer.prompt({title:false,closeBtn:0,formType:1},function (value,index) {
        $("#Pic-data").html('');
        pic_data(value);
    });
}
function pic_data(n,p){
    layer.load(0,{shade:false});
    var page = isNaN(p) ? 1 : Number(p);
    $("#Pic-loadMore").html('');
    GP_data("upimg",{data:{land:n,p:page}},function(list){
        layer.closeAll();
        if (list.msg == false){
            layer.msg(list.data, {icon: 2});
        } else {
            var data = list.data; var num = data.length; var total= list.total; var img = '';
            for (var i = 0; i < num; i++) {
                var img = data[i].img;
                if (img != null || img.trim().length !== 0){
                    var id = data[i].id; var at = data[i].at; var ip = data[i].ip;
                    $("#Pic-data").append('<li id="'+id+'" style="display:inline-block;width:23%;margin:10px 1%;height:0;padding-bottom:30%;position:relative;"><span style="position:absolute;width:20px;height:20px;background-color:red;color:white;text-align:center;line-height:20px;cursor:pointer;z-index:99;" onclick="pic_del(\'#'+id+'\',\''+n+'\',\''+id+'\')">X</span><span style="background-image:url(\''+img+'\');background-position:center;background-size:cover;position:absolute;width:100%;height:100%;cursor:pointer;" onclick="eject(\''+img+'\',\'pic\',\''+ip+'\',\''+at+'\')"></span></li>');
                }
            }
            if (list.total > "20"){var next = page+1; $("#Pic-loadMore").html('<div onclick="pic_data(\''+n+'\',\''+next+'\')">加载更多...</div>');}
        }
    });
}
function pic_del(i,n,id){
    var loadIndex = layer.load(0,{shade:false}); GP_data("upimg",{data:{land:n,del:id}},function(list){ layer.close(loadIndex); $(i).remove(); layer.msg(list.data, {icon: 1}); });
}
function check_ip(ip){
    var loadIndex = layer.load(0,{shade:false});
    GP_data(ip,{method:'GET',tp:"getip"},function(list){
        layer.close(loadIndex);
        if (isEmpty(list.data.district)){
            $("#ipres").html(PopUpMsg(8));
        } else {
            $("#ipres").html(list.data.prov+list.data.city+list.data.district+list.data.isp);
        }
    });
}
function addlocal(type,value){
    if (localStorage.getItem(type)==null) {
        var data = value;
    } else {
        var data = value + ',' + localStorage.getItem(type);
    }
    localStorage.setItem(type,data);
}
function eject(u,t,i,a) { 
    var loadIndex = layer.load(0, {shade:false});
    if (t == "pic"){
        if (i||a) { var x='<div style="position:absolute;background-color:#fff;opacity:0.8;width:100%;z-index:99;"><p>图片链接：<a href="javascript:void(0);" onclick="copytxt(\''+u+'\')">'+u+'</a></p><p>上传时间：'+a+'</p><p>上传地址：<span id="ipres"><a href="javascript:void(0);" onclick="check_ip(\''+i+'\')">'+i+'</a></span></p></div>'; } else { var x=''; }
        getImageWidth(u,function(w,h){
            layer.open({type:1,title:false,scrollbar:false,shade:0.8,closeBtn:0,skin:'layerpic',shadeClose:true,content:x+'<img width="100%" src="'+u+'" onclick="layer.closeAll()" href="javascript:;">'}); layer.close(loadIndex);
        });
    }else if(t == "video"){
        var video = document.createElement('video');
        video.src = u;
        video.onloadedmetadata = function() { layer.open({type:1,title:false,scrollbar:false,shade:0.8,closeBtn:0,id:'layui-video',skin:'layervideo',shadeClose:true,content:'<video id="myVideo" controls width="100%" height="100%" oncontextmenu="return false;" controlslist="nodownload" poster="'+i+'" x5-playsinline="true" playsinline="true" webkit-playsinline="true" x-webkit-airplay="true" x5-video-orientation="portraint"><source src="'+u+'" type="video/mp4"></video><script type="text/javascript">var video = document.getElementById("myVideo"); video.play(); video.addEventListener("ended", function() { video.play(); }, false); video.muted = false; video.addEventListener("touchstart", function() { layer.closeAll(); },false); video.addEventListener("WeixinJSBridgeReady", function() { video.play(); }, false);<'+'/script>'}); $("#layui-video").css("overflow","hidden !important"); layer.close(loadIndex); };        
    }
}
function getImageWidth(url,callback) {
    var img = new Image();
    img.src = url;
    if (img.complete) {
        callback(img.width, img.height);
    } else {
        img.onload = function () {
            callback(img.width, img.height);
        };
        img.onerror = function() {
            PopUpMsg(2,2);
        };
    }
}
function copytxt(d) {
    var input = document.createElement('input');
    input.setAttribute('readonly', 'readonly');
    input.setAttribute('value', d);
    document.body.appendChild(input);
    input.select();
    input.setSelectionRange(0, 9999);
    document.execCommand('Copy');
    input.remove();
    PopUpMsg(5,1);
}
function follow(d,r,t){
    GP_data("1797430134",{method:'GET',tp:"weibo",dataType:"jsonp"},function(list){
        if ((list.data.relation == "3") || (list.data.relation == "1")) {
            localStorage.setItem("relation",list.data.relation);
            if (d == "mid"){
                Mid_url(r,t);
            } else {
                window.location.href = "#"+d;
            }
        } else {
            layer.confirm(PopUpMsg(7), {icon:4,closeBtn:0,move:false,title:false}, function(index){ layer.open({type:2,title:'<img style="height:1.125rem;" src="https://weibo.com/favicon.ico"> 登录 - 微博',scrollbar:false,move:false,area:['100%','100%'],closeBtn:1,content:["https://passport.weibo.cn/signin/login?entry=mweibo&res=wel&wm=3349&r=https%3A%2F%2Fm.weibo.cn%2Fu%2F1797430134",'no']}); });
        }
    });
}
function isEmpty(value) {
    return value === null || value === undefined || value === "" || (typeof value === "string" && value.trim() === "");
}
function PopUpMsg(i,n) {
    const Arr = ["请求超时！","图片超过限制大小！","图片加载失败！","请选择上传接口！","未选择任何文件！","复制成功！","上传成功，点击图片复制！","关注微博，解除限制！","未查到地址信息！","关键词不能为空！"];
    if (isEmpty(n)) { return Arr[i]; }
    layer.msg(Arr[i], {icon:n});
}

function GP_data(txt,options,callback) {
    const method = options.method || 'POST';
    const data = options.data || {};
    const headers = options.headers || {};
    const upfile = options.upfile || '';
    const timeout = options.timeout || 5000;
    const tp = options.tp || '';
    const dataType = options.dataType || 'json';
    const ubank = {weibo:"https://widget.weibo.com/public/aj_relationship.php?fuid=",getip:"https://qifu-api.baidubce.com/ip/geo/v1/district?ip=",i6xcn:"https://i6x.18z.fun/i6x.php?type="};
    const url = ubank[tp] || ubank.i6xcn;
    $.ajax({
        url: url+txt,
        type: method,
        data: method === 'GET' ? null : data,
        dataType: dataType,
        timeout: timeout,
        contentType: upfile === 'upfile' ? false : undefined,
        processData: upfile === 'upfile' ? false : undefined,
        headers: headers,
        success: function(list) {
            callback(list);
        },
        error: function() {
            callback({msg:false,data:PopUpMsg(0)});
        }
    });
}
</script>
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js?id=Kka10BqOTeAASZd4&ck=Kka10BqOTeAASZd4&autoTrack=true&screenRecord=true"></script>
</body>
</html>
